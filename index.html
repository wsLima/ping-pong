<!DOCTYPE html>
<html>
	<body>
		<canvas id="folha" width="600" height="500"></canvas>
		<script>
			window.onload = function () {
				setInterval(executar, 1000 / 30);
			};

			var posicaoJogador1 = (posicaoJogador2 = 10);
			var posicaoBolaX = (posicaoBolaY = 10);
			var velocidadeBolaPosicaoX = (velocidadeBolaPosicaoY = 5);
			var pontuacaoJogador1 = (pontuacaoJogador2 = 0);

			function executar() {
				var folhaDesenho = document.getElementById('folha');
				var areaDesenho = folhaDesenho.getContext('2d');

				var larguraCampo = 600;
				var alturaCampo = 500;
				var espessuraRede = 5;

				var diametroBola = 10;

				var espessuraRaquete = 11;
				var alturaRaquete = 100;
				var efeitoRaquete = 0.3;

				areaDesenho.fillStyle = '#286047';
				areaDesenho.fillRect(0, 0, larguraCampo, alturaCampo);

				areaDesenho.fillStyle = '#ffffff';

				// Linha
				areaDesenho.fillRect(
					larguraCampo / 2 - espessuraRede / 2,
					0,
					espessuraRede,
					alturaCampo,
				);

				// Desenha a bola
				areaDesenho.fillRect(
					posicaoBolaX - diametroBola / 2,
					posicaoBolaY - diametroBola / 2,
					diametroBola,
					diametroBola,
				);

				// Raquetes
				areaDesenho.fillRect(
					0,
					posicaoJogador1,
					espessuraRaquete,
					alturaRaquete,
				);
				areaDesenho.fillRect(
					larguraCampo - espessuraRaquete,
					posicaoJogador2,
					espessuraRaquete,
					alturaRaquete,
				);

				posicaoBolaX = posicaoBolaX + velocidadeBolaPosicaoX;
				posicaoBolaY = posicaoBolaY + velocidadeBolaPosicaoY;

				// Verifica a lateral superior
				if (posicaoBolaY < 0 && velocidadeBolaPosicaoY < 0) {
					velocidadeBolaPosicaoY = -velocidadeBolaPosicaoY;
				}

				// Verifica a lateral inferior
				if (posicaoBolaY > alturaCampo && velocidadeBolaPosicaoY > 0) {
					velocidadeBolaPosicaoY = -velocidadeBolaPosicaoY;
				}

				// Verifica se o Jogador 2 fez um ponto
				if (posicaoBolaX < 0) {
					if (
						posicaoBolaY > posicaoJogador1 &&
						posicaoBolaY < posicaoJogador1 + alturaRaquete
					) {
						// Rebate a bola
						velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;

						var diferencaY =
							posicaoBolaY - (posicaoJogador1 + alturaRaquete / 2);
						velocidadeBolaPosicaoY = diferencaY * efeitoRaquete;
					} else {
						// Pontos do Jogador 2
						pontuacaoJogador2 = pontuacaoJogador2 + 1;
						// Colocar no centro
					}
				}

				// Verifica se o Jogador 1 fez um ponto
				if (posicaoBolaX > larguraCampo) {
					if (
						posicaoBolaY > posicaoJogador2 &&
						posicaoBolaY < posicaoJogador2 + alturaRaquete
					) {
						velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;

						var diferencaY =
							posicaoBolaY - (posicaoJogador2 + alturaRaquete / 2);
						velocidadeBolaPosicaoY = diferencaY * efeitoRaquete;
					} else {
						// Pontos do Jogador 1
						pontuacaoJogador1 = pontuacaoJogador1 + 1;
						// Colocar no centro
					}
				}
			}
		</script>
	</body>
</html>
